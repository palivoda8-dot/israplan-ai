# Memory - 2026-02-08

## Israplan-AI Project Updates (Commute Radius Fix)
- **Context**: Andrey (urban planner) reported that the "Calculate Commute Zones" button on `israplan.com` was not working.
- **Repository**: `https://github.com/palivoda8-dot/israplan-ai.git`
- **Problem**: The backend function `functions/api/commute.js` was a placeholder returning empty results.
- **Actions Taken**:
    - Updated `functions/api/commute.js` (Cloudflare Pages Function) to implement a real routing engine.
    - Switched to **OSRM Table API** for batch travel time and distance calculations.
    - Fixed a "Unexpected token '<'" JSON error by importing `localities.json` directly into the worker instead of fetching it via URL.
    - Synchronized API response fields (`durationText`, `distanceText`) with the frontend requirement in `CommuteRadius.jsx`.
    - Increased search accuracy to check the 200 closest localities.
- **Key Technical Details**:
    - Profile mapping: `DRIVE` -> `car`, `WALK` -> `foot`, `BICYCLE` -> `bicycle`.
    - Used `annotations=duration,distance` in OSRM request.
- **Status**: Final fix pushed to GitHub `main` branch. Waiting for Cloudflare Pages deployment to complete on `israplan.com`.
